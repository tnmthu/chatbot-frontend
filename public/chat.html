<html>

<head>
  <title>rLeT BOT</title>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
  <link rel="apple-touch-icon" sizes="180x180" href="icon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="icon/favicon-16x16.png">
  <link rel="manifest" href="icon/site.webmanifest">
  <link rel="mask-icon" href="icon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#b91d47">
  <meta name="theme-color" content="#ffffff">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js"></script>
  <script src="https://cdn.rawgit.com/showdownjs/showdown/1.7.4/dist/showdown.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.7.0/tiny-slider.css">
  <link rel="stylesheet" href="css/styles.css" />
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
</head>

<body>
  <div class="container-fluid h-100">
    <div class="row p-0 h-100">
      <div class="d-none d-lg-block col-lg-7 col-xl-8 p-0">
        <div class="cnt-name" id="cnt-name">
          H·ªá th·ªëng t∆∞ v·∫•n b·∫•t ƒë·ªông s·∫£n t·ª± ƒë·ªông
        </div>
        <div class="animated_pointer">>></div>
        <div class="graph_name" id="switch_btn">Conceptual Graph</div>
        <div class="cards">
          <div class="card_info" id="info">
            <div class="cnt">
              <div class="text-bot-1">
                Xin ch√†o! üëã T√¥i c√≥ th·ªÉ gi√∫p g√¨ ƒë∆∞·ª£c b·∫°n?
              </div>
              <div class="text-user n1" id="n1">
                T√¥i mu·ªën mua nh√† ·ªü qu·∫≠n 3.
              </div>
              <div class="text-bot b1" id="b1">
                ƒê√¢y l√† m·ªôt s·ªë nh√† ·ªü qu·∫≠n 3 ph√π h·ª£p v·ªõi y√™u c·∫ßu c·ªßa b·∫°n.
              </div>
              <div class="text-user n2" id="n2">
                Mua nh√† m·∫∑t ti·ªÅn ·ªü qu·∫≠n 1 th√¨ c·∫ßn bao nhi√™u ti·ªÅn?
              </div>
              <div class="text-bot b2" id="b2">
                Nh√† m·∫∑t ti·ªÅn ·ªü qu·∫≠n 1 th√¨ c√≥ gi√° kho·∫£ng ...
              </div>
              <div class="text-user n3" id="n3">
                V·ªõi 3 t·ª∑ th√¨ t√¥i mua ƒë∆∞·ª£c ƒë·∫•t r·ªông c·ª° bao nhi√™u?
              </div>
              <div class="text-bot b3" id="b3">
                V·ªõi m·ª©c ƒë·∫ßu t∆∞ ƒë√≥ b·∫°n c√≥ th·ªÉ mua ƒë·∫•t r·ªông c·ª° ...
              </div>
              <div class="text-user n4" id="n4">
                Nh√† ·ªü qu·∫≠n 2 th√¨ c√≥ ti·ªÅm nƒÉng g√¨?
              </div>
              <div class="text-bot b4" id="b4">
                Nh√† ·ªü khu v·ª±c n√†y c√≥ c√°c ti·ªÅm nƒÉng nh∆∞ ...
              </div>
              <div class="text-user n5" id="n5">
                Thu√™ ph√≤ng v·ªõi gi√° 2 tri·ªáu / th√°ng th√¨ n√™n t√¨m ·ªü ƒë√¢u?
              </div>
              <div class="text-bot b5" id="b5">
                B·∫°n c√≥ th·ªÉ th·ª≠ t√¨m ph√≤ng ·ªü qu·∫≠n ...
              </div>
            </div>
            <div class="bg"></div>
          </div>
          <div class="card_info" id="credit">
            <img src="hcmuttrans.png" width="40px" height="40px" class="logobk">
            <div class="bk-name">
              ƒê·∫°i h·ªçc B√°ch Khoa - ƒêHQG TP.HCM <br>
              Khoa KH & KT M√°y T√≠nh
            </div>
            <div class="thay-tho">
              GVHD: &nbsp; PGS. TS. Qu·∫£n Th√†nh Th∆°‚Äã
            </div>
            <span id="svth" class="d-none d-xl-block">SVTH</span>
            <a href="mailto:1513448@hcmut.edu.vn" target="_blank"><span id="nhat">Nguy·ªÖn H·ªØu Anh Ti·∫øn</span></a>
            <a href="mailto:1511849@hcmut.edu.vn" target="_blank"><span id="nhl">Nguy·ªÖn Ho√†ng L·ªôc</span></a>
          </div>
        </div>
        <div class="graph-wrapper" id="whole_graph">
          <!-- Top Four -->
          <div class="entity" id="area">
            <div class="name">Area</div>
            <div class="content"></div>
          </div>
          <div class="entity" id="potential">
            <div class="name">Potential</div>
            <div class="content"></div>
          </div>
          <div class="entity" id="price">
            <div class="name">Price</div>
            <div class="content"></div>
          </div>
          <div class="entity" id="location">
            <div class="name">Location</div>
            <div class="content"></div>
          </div>
          <div id="top_four"></div>
          <div id="top_four_location"></div>
          <div id="top_four_three_left"></div>
          <div id="top_four_price"></div>
          <div id="top_four_potential"></div>
          <div id="top_four_area"></div>
          <!-- End Top Four -->
          <div class="entity" id="real_estate">
            <div class="name">Real Estate</div>
            <div class="content"></div>
          </div>
          <!-- Bottom Four -->
          <div id="bottom_four"></div>
          <div id="bottom_four_position"></div>
          <div id="bottom_four_interior_room"></div>
          <div id="bottom_four_interior_floor"></div>
          <div id="bottom_four_surrounding_characteristics"></div>
          <div class="attribute" id="position">
            <div class="name">Position</div>
            <div class="content"></div>
          </div>
          <div class="attribute" id="surrounding_characteristics">
            <div class="name">Surrounding Characteristic</div>
            <div class="content"></div>
          </div>
          <div class="attribute" id="interior_floor">
            <div class="name">Floor</div>
            <div class="content"></div>
          </div>
          <div class="attribute" id="interior_room">
            <div class="name">Room</div>
            <div class="content"></div>
          </div>
          <!-- End Bottom Four -->

          <div class="attribute" id="transaction_type">
            <div class="name">Transaction Type</div>
            <div class="content"></div>
          </div>
          <div class="attribute" id="surrounding_place">
            <div class="name">Surounding Place</div>
            <div class="content"></div>
          </div>
          <div class="attribute" id="realestate_type">
            <div class="name">Type</div>
            <div class="content"></div>
          </div>
          <div class="attribute" id="orientation">
            <div class="name">Orientation</div>
            <div class="content"></div>
          </div>
          <div class="attribute" id="legal">
            <div class="name">Legal</div>
            <div class="content"></div>
          </div>
          <div class="entity" id="addr_district">
            <div class="name">District</div>
            <div class="content"></div>
          </div>
          <div class="attribute" id="addr_city">
            <div class="name">City</div>
            <div class="content"></div>
          </div>
          <div class="attribute" id="addr_street">
            <div class="name">Street</div>
            <div class="content"></div>
          </div>
          <div class="attribute" id="addr_ward">
            <div class="name">Ward</div>
            <div class="content"></div>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-5 col-xl-4 p-0">
        <div class="wrapper">

          <div id="message_window">
            <div class="header">
              <span>
                <img src="hcmut.png" class="avt">
              </span>
              <div class="name">rLeT BOT</div>
            </div>
            <div class="disconnected">
              Disconnected... reconnecting!
            </div>
            <div class="offline">
              Offline! Reload to reconnect.
            </div>
            <section>
              <div id="message_list">
                <div id="message_template">

                  <div class="message {{message.type}}">
                    {{#if message.isTyping}}
                    <div class="typing-indicator">
                      <span></span>
                      <span></span>
                      <span></span>
                    </div>
                    {{/if}}
                    {{{message.html}}}

                    {{#if message.open_link}}
                    <a href="{{{message.open_link}}}" target="_blank"
                      class="button_message">{{#if message.link_title}}{{message.link_title}}{{else}}{{message.open_link}}{{/if}}</a>
                    {{/if}}
                  </div>
                </div>

                <div id="message_rating_template">
                  <div class="rating-mask" id="rating-mask-{{{message.ratingId}}}">
                    <svg style="display: none;">
                      <symbol id="star" viewBox="0 0 98 92">
                        <title>star</title>
                        <path stroke='#000' stroke-width='0'
                          d='M49 73.5L22.55 87.406l5.05-29.453-21.398-20.86 29.573-4.296L49 6l13.225 26.797 29.573 4.297-21.4 20.86 5.052 29.452z'
                          fill-rule='evenodd' />
                    </svg>
                  </div>
                </div>

              </div>

              <div id="message_slider_template">
                <div class="carousel-mask" id="mask-{{{message.resultSliderId}}}">
                  <div class="carousel-items" id="wrapper-{{{message.resultSliderId}}}">
                  </div>
                </div>
              </div>

              <div id="message_list_template">
                <div class="list-mask" id="list-mask-{{{message.attrListId}}}">
                </div>
              </div>

              <div id="message_intent_template">
                <div class="list-mask" id="intent-mask-{{{message.intentListId}}}">
                </div>
              </div>
            </section>
            <div id="message_replies">
            </div>
            <footer>
              <form id="form_mesg" onsubmit="Botkit.send(Botkit.input.value, event)">
                <input type="text" autocomplete="off" id="messenger_input" placeholder="Nh·∫≠p tin nh·∫Øn ·ªü ƒë√¢y"
                  onkeyup="stoppedTyping()" />
                <button type="submit" id="send_btn">
                  <div class="send">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                      viewBox="0 0 24 24" xml:space="preserve" class="active" style="fill:var(--primary-color-disabled)"
                      id="fill_btn">
                      <path
                        d="M22,11.7V12h-0.1c-0.1,1-17.7,9.5-18.8,9.1c-1.1-0.4,2.4-6.7,3-7.5C6.8,12.9,17.1,12,17.1,12H17c0,0,0-0.2,0-0.2c0,0,0,0,0,0c0-0.4-10.2-1-10.8-1.7c-0.6-0.7-4-7.1-3-7.5C4.3,2.1,22,10.5,22,11.7z">
                      </path>
                    </svg>
                  </div>
                </button>
              </form>
            </footer>
          </div>
        </div>
      </div>
    </div>

  </div>



  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.7.0/min/tiny-slider.js"></script>

  <script type="text/javascript">
    $("#messenger_input").focus();
    function stoppedTyping() {
      if (document.getElementById("messenger_input").value === "") {
        $('#send_btn').attr("disabled", true);
        $('#fill_btn').attr('style', "fill:var(--primary-color-disabled)");
      } else {
        $('#send_btn').attr("disabled", false);
        $('#fill_btn').attr('style', "fill: var(--primary-color)");
      }
    }
  </script>
  <script src="leader-line.min.js"></script>
  <script type="text/javascript">
    setTimeout(() => { $("#n1").hide() }, 6400)
    setTimeout(() => { $("#b1").hide() }, 6400)

    setTimeout(() => { $("#n2").hide() }, 11400)
    setTimeout(() => { $("#b2").hide() }, 11400)

    setTimeout(() => { $("#n3").hide() }, 16400)
    setTimeout(() => { $("#b3").hide() }, 16400)

    setTimeout(() => { $("#n4").hide() }, 21400)
    setTimeout(() => { $("#b4").hide() }, 21400)

    var graph_show = false;
    $("#switch_btn").click(() => {
      if (graph_show === false) {
        $(".cards").hide();
        $("#cnt-name").hide();
        $("#switch_btn").css("opacity", "1");
        $("#whole_graph").css("opacity", "1");
        $("body>svg").css("opacity", "1");
      } else {
        setTimeout(() => {
          $(".cards").show();
          $("#cnt-name").show();
        }, 500)
        $("#switch_btn").css("opacity", ".5");
        $("#whole_graph").css("opacity", "0");
        $("body>svg").css("opacity", "0");
      }
      graph_show = !graph_show;

    })

    function activateLine(key) {
      if (line_list[key]) {
        if (key === "area") {
          $("#top_four_area").css("top", "50px");
        }
        if (key === "potential") {
          $("#top_four_potential").css("top", "130px");
        }
        if (key === "price") {
          $("#top_four_price").css("top", "210px");
        }
        if (BOTTOM_FOUR_ATTR.indexOf(key) > -1) {
          var offset = $("#" + key).width() / 2;
          var id = "#bottom_four_" + key
          var curLen = parseInt($("#" + key).css("left"));
          curLen += offset
          // console.log(offset)
          // console.log($(id).css("left"))
          // console.log(curLen)
          $(id).css("left", curLen + "px")
        }
        for (var i = 0; i < line_list[key].length; i++) {
          (function (line) {
            if (key === "area") // console.log(myLine[line])
            myLine[line].color = "var(--primary-color)"
            myLine[line].size = 3
            myLine[line].position()
          })(line_list[key][i])
        }
      }
    }
    function deactivateLine(key) {
      if (line_list[key]) {
        if (key === "area") {
          $("#top_four_area").css("top", "37.5px");
        }
        if (key === "potential") {
          $("#top_four_potential").css("top", "117.5px");
        }
        if (key === "price") {
          $("#top_four_price").css("top", "197.5px");
        }
        if (BOTTOM_FOUR_ATTR.indexOf(key) > -1) {
          var offset = $("#" + key).width() / 2;
          var id = "#bottom_four_" + key
          var curLen = parseInt($("#" + key).css("left"));
          curLen += offset
          $(id).css("left", curLen + "px")

        }
        for (var i = 0; i < line_list[key].length; i++) {
          (function (line) {
            myLine[line].color = "var(--primary-color-disabled)"
            myLine[line].size = 2
            myLine[line].position()
          })(line_list[key][i])
        }
      }
    }
    var myLine = {}
    var line_list = {}
    const TOP_FOUR_ATTR = ['price', 'location', 'potential', 'area']
    myLine["top_four"] = new LeaderLine({
      start: document.getElementById('real_estate'),
      end: document.getElementById('top_four'),
      path: 'straight',
      size: 2,
      color: "var(--primary-color-disabled)",
      endPlug: 'behind'
    });
    myLine["top_four_location"] = new LeaderLine({
      start: document.getElementById('top_four'),
      end: document.getElementById('top_four_location'),
      path: 'straight',
      size: 2,
      color: "var(--primary-color-disabled)",
      endPlug: 'behind'
    });
    myLine["top_four_three_left"] = new LeaderLine({
      start: document.getElementById('top_four'),
      end: document.getElementById('top_four_three_left'),
      path: 'straight',
      size: 2,
      color: "var(--primary-color-disabled)",
      endPlug: 'behind'
    });
    myLine["top_four_price"] = new LeaderLine({
      start: document.getElementById('top_four_three_left'),
      end: document.getElementById('top_four_price'),
      path: 'straight',
      size: 2,
      color: "var(--primary-color-disabled)",
      endPlug: 'behind'
    });
    myLine["top_four_potential"] = new LeaderLine({
      start: document.getElementById('top_four_price'),
      end: document.getElementById('top_four_potential'),
      path: 'straight',
      size: 2,
      color: "var(--primary-color-disabled)",
      endPlug: 'behind'
    });
    myLine["top_four_area"] = new LeaderLine({
      start: document.getElementById('top_four_potential'),
      end: document.getElementById('top_four_area'),
      path: 'straight',
      size: 2,
      color: "var(--primary-color-disabled)",
      endPlug: 'behind'
    });
    for (var i = 0; i < TOP_FOUR_ATTR.length; i++) {
      myLine[TOP_FOUR_ATTR[i]] = new LeaderLine({
        start: document.getElementById('top_four_' + TOP_FOUR_ATTR[i]),
        end: document.getElementById(TOP_FOUR_ATTR[i]),
        path: 'straight',
        size: 2,
        color: "var(--primary-color-disabled)"
      });
      line_list[TOP_FOUR_ATTR[i]] = [];
      line_list[TOP_FOUR_ATTR[i]].push("top_four");
      if (TOP_FOUR_ATTR[i] != "location") line_list[TOP_FOUR_ATTR[i]].push("top_four_three_left");
      line_list[TOP_FOUR_ATTR[i]].push("top_four_" + TOP_FOUR_ATTR[i]);
      line_list[TOP_FOUR_ATTR[i]].push(TOP_FOUR_ATTR[i]);
    }
    line_list["potential"].push("top_four_price")
    line_list["area"].push("top_four_price")
    line_list["area"].push("top_four_potential")

    const BOTTOM_FOUR_ATTR = ['position', 'interior_room', 'interior_floor', 'surrounding_characteristics']
    myLine["bottom_four"] = new LeaderLine({
      start: document.getElementById('real_estate'),
      end: document.getElementById('bottom_four'),
      path: 'straight',
      size: 2,
      color: "var(--primary-color-disabled)",
      endPlug: 'behind'
    });
    myLine["bottom_four_interior_room"] = new LeaderLine({
      start: document.getElementById('bottom_four'),
      end: document.getElementById('bottom_four_interior_room'),
      path: 'straight',
      size: 2,
      color: "var(--primary-color-disabled)",
      endPlug: 'behind'
    });
    myLine["bottom_four_position"] = new LeaderLine({
      start: document.getElementById('bottom_four_interior_room'),
      end: document.getElementById('bottom_four_position'),
      path: 'straight',
      size: 2,
      color: "var(--primary-color-disabled)",
      endPlug: 'behind'
    });
    myLine["bottom_four_interior_floor"] = new LeaderLine({
      start: document.getElementById('bottom_four'),
      end: document.getElementById('bottom_four_interior_floor'),
      path: 'straight',
      size: 2,
      color: "var(--primary-color-disabled)",
      endPlug: 'behind'
    });
    myLine["bottom_four_surrounding_characteristics"] = new LeaderLine({
      start: document.getElementById('bottom_four_interior_floor'),
      end: document.getElementById('bottom_four_surrounding_characteristics'),
      path: 'straight',
      size: 2,
      color: "var(--primary-color-disabled)",
      endPlug: 'behind'
    });
    for (var i = 0; i < BOTTOM_FOUR_ATTR.length; i++) {
      myLine[BOTTOM_FOUR_ATTR[i]] = new LeaderLine({
        start: document.getElementById('bottom_four_' + BOTTOM_FOUR_ATTR[i]),
        end: document.getElementById(BOTTOM_FOUR_ATTR[i]),
        path: 'straight',
        size: 2,
        color: "var(--primary-color-disabled)"
      });
      line_list[BOTTOM_FOUR_ATTR[i]] = [];
      line_list[BOTTOM_FOUR_ATTR[i]].push("bottom_four");
      line_list[BOTTOM_FOUR_ATTR[i]].push("bottom_four_" + BOTTOM_FOUR_ATTR[i]);
      line_list[BOTTOM_FOUR_ATTR[i]].push(BOTTOM_FOUR_ATTR[i]);
    }
    line_list["position"].push("bottom_four_interior_room")
    line_list["surrounding_characteristics"].push("bottom_four_interior_floor")

    const FIVE_ATTR = ['realestate_type', 'orientation', 'legal', 'transaction_type', 'surrounding_place']
    for (var i = 0; i < FIVE_ATTR.length; i++) {
      myLine[FIVE_ATTR[i]] = new LeaderLine({
        start: document.getElementById('real_estate'),
        end: document.getElementById(FIVE_ATTR[i]),
        path: 'straight',
        size: 2,
        color: "var(--primary-color-disabled)"
      });
      line_list[FIVE_ATTR[i]] = [];
      line_list[FIVE_ATTR[i]].push(FIVE_ATTR[i]);
    }
    const LOCATION_ATTR = ['addr_ward', 'addr_city', 'addr_district', 'addr_street']
    for (var i = 0; i < LOCATION_ATTR.length; i++) {
      myLine[LOCATION_ATTR[i]] = new LeaderLine({
        start: document.getElementById('location'),
        end: document.getElementById(LOCATION_ATTR[i]),
        path: 'straight',
        size: 2,
        color: "var(--primary-color-disabled)"
      });
      line_list[LOCATION_ATTR[i]] = [];
      line_list[LOCATION_ATTR[i]].push(LOCATION_ATTR[i]);
    }
    for (var key in myLine) {
      if (!myLine.hasOwnProperty(key)) continue;
      var obj = myLine[key];
      obj.position();
    }
    if (graph_show === false) {
      $("body>svg").css("opacity", "0.0")
    }
  </script>
  <script src="client.js"></script>
</body>

</html>